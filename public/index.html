<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Real Estate Listings</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f0f2f5; margin: 0; padding: 20px; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 25px; max-width: 1200px; margin: auto; }
        .card { background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1); transition: transform 0.2s; }
        .card:hover { transform: translateY(-5px); }
        .card img { width: 100%; height: 200px; object-fit: cover; }
        .content { padding: 15px; }
        .price { font-size: 1.4em; font-weight: bold; color: #1a73e8; margin-bottom: 5px; }
        .address { color: #5f6368; font-size: 0.9em; margin-bottom: 15px; }
        .btn { display: inline-block; background: #1a73e8; color: white; padding: 10px 20px; text-decoration: none; border-radius: 6px; font-weight: 500; }
    </style>
</head>
<body>
    <h1 style="text-align: center; color: #202124;">Current Listings</h1>
    <div class="grid" id="listings-grid">Loading properties...</div>

    <script>
        async function loadListings() {
            const res = await fetch('/api/listings');
            const properties = await res.json();
            const grid = document.getElementById('listings-grid');
            
            grid.innerHTML = properties.map(p => `
                <div class="card">
                    <img src="${p.Media?.[0]?.MediaURL || 'https://via.placeholder.com/300x200?text=No+Image'}" alt="Property">
                    <div class="content">
                        <div class="price">${p.TotalActualRent ? '$' + p.TotalActualRent : 'Price on Request'}</div>
                        <div class="address">${p.UnparsedAddress}, ${p.City}</div>
                        <a href="/property/${p.ListingKey}" class="btn">View Details</a>
                    </div>
                </div>
            `).join('');
        }
        loadListings();
    </script>
</body>
</html>
